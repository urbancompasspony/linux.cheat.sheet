sudo apt install motion v4l2-ctl

sudo nano /etc/motion/motion.conf
# Run in background as daemon
daemon off
# User to run motion as (optional, default is motion)
# process_id_file /var/run/motion/motion.pid
# Start in setup mode (useful for initial setup)
setup_mode off
# Log level (1-9, higher = more verbose)
log_level 6
# Target directory for pictures and films
target_dir /var/lib/motion
# Videodevice to be used (default /dev/video0)
# This will be overridden in camera-specific configs
; videodevice /dev/video0
# Image width/height in pixels
; width 640
; height 480
# Maximum number of frames to capture per second
; framerate 15
# Enable web control interface
webcontrol_localhost off
webcontrol_port 8080
# Enable streaming of images
stream_localhost off
stream_port 8081
# Camera config files
camera /etc/motion/camera1.conf
camera /etc/motion/camera2.conf

sudo nano /etc/motion/camera1.conf
conf# Camera name
camera_name webcam1
# Video device
videodevice /dev/video0
# Image dimensions
width 640
height 480
framerate 15
# Rotate image (0, 90, 180, 270)
rotate 0
# Target directory for this camera
target_dir /var/lib/motion/camera1
# Text to include in images (shows camera name and timestamp)
text_left webcam1
text_right %Y-%m-%d %T
# Detection settings
threshold 1500
minimum_motion_frames 1
# Output settings - pictures
picture_output on
picture_filename %Y%m%d_%H%M%S-%q
# Output settings - movies
movie_output off
movie_filename %Y%m%d_%H%M%S
# Streaming port for this camera
stream_port 8181
stream_quality 85
stream_localhost off
# Web control disabled for individual cameras
webcontrol_port 0

sudo nano /etc/motion/camera2.conf
conf# Camera name
camera_name webcam2
# Video device
videodevice /dev/video1
# Image dimensions
width 640
height 480
framerate 15
# Rotate image
rotate 0
# Target directory for this camera
target_dir /var/lib/motion/camera2
# Text overlay
text_left webcam2
text_right %Y-%m-%d %T
# Detection settings
threshold 1500
minimum_motion_frames 1
# Output settings - pictures
picture_output on
picture_filename %Y%m%d_%H%M%S-%q
# Output settings - movies
movie_output off
movie_filename %Y%m%d_%H%M%S
# Streaming port for this camera (different from camera1)
stream_port 8182
stream_quality 85
stream_localhost off
# Web control disabled
webcontrol_port 0

sudo mkdir -p /var/lib/motion/camera1
sudo mkdir -p /var/lib/motion/camera2
sudo chown -R motion:motion /var/lib/motion

v4l2-ctl --list-devices

This will show you which webcam is /dev/video0 and which is /dev/video1.

Create a systemd service override:

sudo systemctl edit motion

ini[Service]
Type=simple
Restart=always
RestartSec=5
KillMode=mixed
TimeoutStopSec=5

3. Reload and start the service

sudo systemctl daemon-reload
sudo systemctl enable motion
sudo systemctl start motion
sudo systemctl status motion

Access Your Cameras

Web Control Interface: http://server-ip:8080
Camera 1 Stream: http://server-ip:8181
Camera 2 Stream: http://server-ip:8182

# View logs
sudo journalctl -u motion -f

# Restart motion
sudo systemctl restart motion

# Test configuration
motion -c /etc/motion/motion.conf -n

Troubleshooting
If cameras don't work, check:

Permissions:
sudo usermod -a -G video motion
Device access:
ls -la /dev/video*

Logs: 
sudo tail -f /var/log/syslog | grep motion
